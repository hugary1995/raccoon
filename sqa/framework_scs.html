<!DOCTYPE html><head><meta charset="UTF-8"><title>Software Coding Standards | RACCOON</title><link rel="icon" type="image/x-icon" href="../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../media/framework/github-logo.png" alt="GitHub wordmark" class="github-mark"></img><img src="../media/framework/github-mark.png" alt="GitHub logo" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="673f67ed-4d00-4198-a61b-47a7381ae872" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="088dded2-78c0-4b79-8fe8-62445215fd84" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="a9681168-f947-44cc-abfa-77222f21f284" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="12102664-8922-4dd2-b81e-593be75b6934" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="3be8c7b6-fd49-4bd7-b2d7-f80995ea6e0b"><i class="material-icons">menu</i></a><ul class="sidenav" id="3be8c7b6-fd49-4bd7-b2d7-f80995ea6e0b"><li><a href="#!" class="dropdown-trigger" data-target="81a1587b-20d0-4bcb-9bbe-569f379c8c28" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="45e2a667-6536-41b4-9fe7-6c79e923c06b" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="8c78c06f-2de3-420c-ab1d-c823cc9e5dc5" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="003d3f92-f69c-47cd-8365-64e3d1102e35" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="673f67ed-4d00-4198-a61b-47a7381ae872"><li><a href="../getting_started/install.html">Install RACCOON</a></li><li><a href="../getting_started/update.html">Update RACCOON</a></li><li><a href="../getting_started/running.html">Running your first model</a></li><li><a href="../getting_started/paraview.html">Visualization</a></li><li><a href="../getting_started/ide.html">Code development</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="088dded2-78c0-4b79-8fe8-62445215fd84"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="a9681168-f947-44cc-abfa-77222f21f284"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="12102664-8922-4dd2-b81e-593be75b6934"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="81a1587b-20d0-4bcb-9bbe-569f379c8c28"><li><a href="../getting_started/install.html">Install RACCOON</a></li><li><a href="../getting_started/update.html">Update RACCOON</a></li><li><a href="../getting_started/running.html">Running your first model</a></li><li><a href="../getting_started/paraview.html">Visualization</a></li><li><a href="../getting_started/ide.html">Code development</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="45e2a667-6536-41b4-9fe7-6c79e923c06b"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="8c78c06f-2de3-420c-ab1d-c823cc9e5dc5"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="003d3f92-f69c-47cd-8365-64e3d1102e35"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="418ec074-90f1-491a-a8d0-f96f26e6cacb" data-section-level="1" data-section-text="Software Coding Standards"><h1 id="software-coding-standards">Software Coding Standards</h1><p><span class="tooltipped" data-tooltip="Multiphysics Object Oriented Simulation Environment" data-position="top" data-delay="50">MOOSE</span> uses <a href="https://clang.llvm.org/docs/ClangFormat.html">ClangFormat</a> for formatting all C++ code in the repository. The application of the format is enforced and checked when the a code is contributed, see <a href="../framework/contributing.html">Contributing</a> for more details. The configuration file for the formatting is provided in the <a href="https://github.com/idaholab/moose/blob/devel/.clang-format">.clang-format</a> file. If clang is installed, the following command will automatically format code changed between your current branch and the supplied <code>&lt;branch&gt;</code> (if omitted, defaults to HEAD).</p><pre style="max-height:350px;"><code class="language-text">
git clang-format [&lt;branch&gt;]
</code></pre><p>The automated testing that occurs on all Pull Requests will produce a &quot;diff&quot; of changes needed to conform with the standard.</p><p>General style guidelines include:</p><ul class="browser-default"><li><p> Single spacing around all binary operators </p></li><li><p> No spacing around unary operators </p></li><li><p> No spacing on the inside of brackets or parenthesis in expressions </p></li><li><p> Avoid braces for single statement control statements (i.e for, if, while, etc.) </p></li><li><p> C++ constructor spacing is demonstrated in the bottom of the example below</p></li></ul><section id="9ccf14ac-7f74-424b-ae74-0918950175d8" data-section-level="2" data-section-text="File Layout"><h2 id="file-layout">File Layout</h2><ul class="browser-default"><li><p>Header files should have a &quot;.h&quot; extension </p></li><li><p>Header files always go either into &quot;include&quot; or a sub-directory of &quot;include&quot; </p></li><li><p>C++ source files should have a &quot;.C&quot; extension </p></li><li><p>Source files go into &quot;src&quot; or a subdirectory of &quot;src&quot;.</p></li></ul></section><section id="4bd39282-5205-4674-af92-a5bd6317be38" data-section-level="2" data-section-text="Files"><h2 id="files">Files</h2><p>Header and source file names must match the name of the class that the files define. Hence, each set of .h and .C files should contain code for a single class. Helper classes or classes not exposed to the user are an exception to this rule.</p><ul class="browser-default"><li><p>src/ClassName.C </p></li><li><p>include/ClassName.h</p></li></ul></section><section id="029809e1-bef2-4d4d-a22e-b64261ce4492" data-section-level="2" data-section-text="Naming"><h2 id="naming">Naming</h2><ul class="browser-default"><li><p><code>ClassName</code> Class names utilize camel case, note the .h and .C filenames must match the class name. </p></li><li><p><code>methodName()</code> Method and function names utilize camel case with the leading letter lower case. </p></li><li><p><code>_member_variable</code> Member variables begin with underscore and are all lower case and use underscore between words. </p></li><li><p><code>local_variable</code> Local variables are lowercase, begin with a letter, and use underscore between words</p></li></ul></section><section id="2559f2ad-70ef-45ed-8cd0-ba1734c1b3c5" data-section-level="2" data-section-text="Use of C ++ keyword auto"><h2 id="use-of-c-keyword">Use of C++ <code>auto</code> keyword</h2><p>Use <code>auto</code> unless it complicates readability, but do not use it in a function or method declaration. Make sure your variables have <strong>good</strong> names when using auto!</p><pre style="max-height:350px;"><code class="language-cpp">
  auto dof = elem-&gt;dof_number(0, 0, 0);
  auto &amp; obj = getSomeObject();
  auto &amp; elem_it = mesh.active_local_elements_begin();
  auto &amp; item_pair = map.find(some_item);

  // Cannot use reference here
  for (auto it = obj.begin(); it != obj.end(); ++it)
    doSomething();

  // Use reference here
  for (auto &amp; obj : container)
    doSomething();
</code></pre></section><section id="167a485e-a4b5-43ce-b14f-4731ff7b4078" data-section-level="2" data-section-text="Index Variables in Looping Constructs"><h2 id="index-variables-in-looping-constructs">Index Variables in Looping Constructs</h2><p>In keeping with good <code>auto</code> practices, it would be really nice if we could use <code>auto</code> for loop indices in places where range loops aren&#x27;t convenient or possible. Unfortunately, the most natural code one would like to write yields a warning with our default compiler flags:</p><pre style="max-height:350px;"><code class="language-cpp">
  for (auto i = 0; i &lt; v.size(); ++i) // DON&#x27;T DO THIS!

  warning: comparison of integers of different signs: &#x27;int&#x27; and &#x27;std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt;::size_type&#x27; (aka &#x27;unsigned long&#x27;)
</code></pre><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">comment</i><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p>This warning stems from the fact that numeric literals in C++ are treated as &quot;signed ints&quot;. There are suffixes that can be applied to literals to force the &quot;correct&quot; type, but are you sure you really know the correct type? If you are thinking &quot;unsigned int&quot; you are in the majority and unfortunately also wrong. The right type for a container is <code>::size_type (aka &#x27;unsigned long&#x27;)</code>. See the error message once more above.</p></div></div></div><p>The ideal solution would be to match the type you are looping over, but this is slightly more difficult than just using <code>decltype</code> due to qualifiers like <code>const</code>. In MOOSE we have solved this for you with <code>MooseIndex</code>:</p><pre style="max-height:350px;"><code class="language-cpp">
  // Looping to a scalar index
  for (MooseIndex(n_nodes) i = 0; i &lt; nodes; ++i)
    ... Do something with index i

  // Looping to a container size (where range-for isn&#x27;t sufficient)
  for (MooseIndex(vector) i = 0; i &lt; vector.size(); ++i)
    ... Do something with index i
</code></pre></section><section id="28a21127-0f35-497f-bc4a-5ef9491e51bd" data-section-level="2" data-section-text="Lambdas"><h2 id="lambdas">Lambdas</h2><p>List captured variables (by value or reference) in the capture list explicitly where possible.</p><pre style="max-height:350px;"><code class="language-cpp">
  std::for_each(container.begin(), container.end(), [=local_var](Foo &amp; foo) {
    foo.item = local_var;
  });
</code></pre></section><section id="2b49c6ca-e1f3-4ef2-89d3-f76b8b2b7c2c" data-section-level="2" data-section-text="Other C ++ Notes"><h2 id="other-c-notes">Other C++ Notes</h2><ul class="browser-default"><li><p>Use the <code>override</code> keyword on overridden <code>virtual</code> methods </p></li><li><p>Use <code>std::make_shared&lt;T&gt;()</code> when allocating new memory for shared pointers </p></li><li><p>Use <code>std::make_unique&lt;T&gt;()</code> when allocating new memory for unique pointers </p></li><li><p>Make use of std::move() for efficiency when possible</p></li></ul></section><section id="da4a0308-3309-48e8-b668-22098594dc3c" data-section-level="2" data-section-text="Variable Initialization"><h2 id="variable-initialization">Variable Initialization</h2><p>When creating a new variable use these patterns:</p><pre style="max-height:350px;"><code class="language-cpp">
unsigned int i = 4;  // Built-in types
SomeObject junk(17); // Objects
SomeObject * stuff = new SomeObject(18); // Pointers
</code></pre></section><section id="5bb65609-8695-46ef-a64b-5504229b8957" data-section-level="2" data-section-text="Trailing Whitespace and Tabs"><h2 id="trailing-whitespace-and-tabs">Trailing Whitespace and Tabs</h2><p>Tabs and trailing whitespace are not allowed in the C++ in the repository. Running the following one-liner from the root directory of your repository will format the code correctly.</p><pre style="max-height:350px;"><code class="language-bash">
find . -name &#x27;*.[Chi]&#x27; -or -name &#x27;*.py&#x27; | xargs perl -pli -e &#x27;s/\s+$//&#x27;
</code></pre></section><section id="202f6ae6-f460-4348-88d4-6dc48018bc57" data-section-level="2" data-section-text="C ++ Includes"><h2 id="c-includes">C++ Includes</h2><p>Only include things that are absolutely necessary in header files. Please use forward declarations when possible.</p><pre style="max-height:350px;"><code class="language-cpp">
// Forward declarations
class Something;
</code></pre><p>All non-system includes should use quotes with a single space between <code>include</code> and the filename.</p><pre style="max-height:350px;"><code class="language-cpp">
#include &quot;LocalInclude.h&quot;
#include &quot;libmesh/libmesh_include.h&quot;

#include &lt;system_library&gt;
</code></pre></section><section id="7d86455d-2420-47ed-b5e8-f93ffac5d2f4" data-section-level="2" data-section-text="Documentation"><h2 id="documentation">Documentation</h2><ul class="browser-default"><li><p>In source documentation should be extensive, designed toward the software developer, and be formatted for the use of <a href="https://www.doxygen.nl/index.html">Doxygen</a>.</p></li></ul></section><section id="2f3026ae-621a-4fe9-851f-6d6f0b9d84b0" data-section-level="2" data-section-text="Python"><h2 id="python">Python</h2><p>Where possible, follow the above rules for Python.  The only modifications are:</p><ol class="browser-default" start="1"><li><p>Four spaces are used for indenting and </p></li><li><p>Member variables should be named as follows:</p></li></ol><pre style="max-height:350px;"><code class="language-python">
class MyClass:
    def __init__(self):
        self.public_member
        self._protected_member
        self.__private_member
</code></pre></section><section id="c3018f20-c5ce-4520-95a3-14437c901fa3" data-section-level="2" data-section-text="Code Commandments"><h2 id="code-commandments">Code Commandments</h2><ul class="browser-default"><li><p>Use references instead of pointers whenever possible.   - i.e., this object lives for a shorter period of time than the object it needs to refer to does </p></li><li><p>Methods should return pointers to objects if returned objects are stored as pointers and references if returned objects are stored as references. </p></li><li><p>When creating a new class:   - Include dependent header files in the *.C file whenever possible (i.e. the header uses only references or pointers in it&#x27;s various declarations) and use forward declarations in the header file as needed.   - One exception is when doing so would require end users to include multiple files to complete definitions of child objects (Errors typically show up as &quot;incomplete class&quot; or something similar during compilation). </p></li><li><p>Avoid using a global variable when possible. </p></li><li><p>Every destructor must be virtual. </p></li><li><p>All function definitions should be in *.C files.   - The only exceptions are for inline functions for speed and templates. </p></li><li><p>Thou shalt not commit accidental insertion in a std::map by using brackets in a right-hand side operator unless proof is provided that it can&#x27;t fail. </p></li><li><p>Thou shalt use range-based loops or <code>MooseIndex()</code> based loops for iteration.</p></li></ul></section></section></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>