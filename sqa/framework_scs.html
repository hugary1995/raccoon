<!DOCTYPE html><head><meta charset="UTF-8"><title>Software Coding Standards | RACCOON</title><link rel="icon" type="image/x-icon" href="../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../media/framework/github-logo.png" alt="GitHub wordmark" class="github-mark"></img><img src="../media/framework/github-mark.png" alt="GitHub logo" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="d677baf2-d235-4995-abfe-31cd15273183" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="347b8811-386b-445e-849e-6e48e1fd2301" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="05942a78-eaac-431e-b2b8-340a3cc2af23" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="652f7031-2943-457e-826d-a5e11999729d" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="9f3ab851-2770-4df1-ba47-4779f3f83ede"><i class="material-icons">menu</i></a><ul class="sidenav" id="9f3ab851-2770-4df1-ba47-4779f3f83ede"><li><a href="#!" class="dropdown-trigger" data-target="3485c8f2-03b9-495d-aafc-397c6ec08782" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="849f07ba-77fa-47f7-a82a-a42913288c01" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="27dec0ce-9d38-477a-8fbe-4648459e707b" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="9e6f70af-87e6-4c5c-b610-36cf95180097" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="d677baf2-d235-4995-abfe-31cd15273183"><li><a href="../getting_started/install.html">Install RACCOON</a></li><li><a href="../getting_started/update.html">Update RACCOON</a></li><li><a href="../getting_started/running.html">Running your first model</a></li><li><a href="../getting_started/paraview.html">Visualization</a></li><li><a href="../getting_started/ide.html">Code development</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="347b8811-386b-445e-849e-6e48e1fd2301"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="05942a78-eaac-431e-b2b8-340a3cc2af23"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="652f7031-2943-457e-826d-a5e11999729d"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="3485c8f2-03b9-495d-aafc-397c6ec08782"><li><a href="../getting_started/install.html">Install RACCOON</a></li><li><a href="../getting_started/update.html">Update RACCOON</a></li><li><a href="../getting_started/running.html">Running your first model</a></li><li><a href="../getting_started/paraview.html">Visualization</a></li><li><a href="../getting_started/ide.html">Code development</a></li><li><a href="../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="849f07ba-77fa-47f7-a82a-a42913288c01"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="27dec0ce-9d38-477a-8fbe-4648459e707b"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="9e6f70af-87e6-4c5c-b610-36cf95180097"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="f4904206-e721-46ca-b7fd-a9cea1b08d9e" data-section-level="1" data-section-text="Software Coding Standards"><h1 id="software-coding-standards">Software Coding Standards</h1><section id="58ae0c26-cca2-48dc-a9a0-270bed449aee" data-section-level="2" data-section-text="C ++ File Formatting"><h2 id="c-file-formatting">C++ File Formatting</h2><p><span class="tooltipped" data-tooltip="Multiphysics Object Oriented Simulation Environment" data-position="top" data-delay="50">MOOSE</span> uses <a href="https://clang.llvm.org/docs/ClangFormat.html">ClangFormat</a> for formatting all C++ code in the repository. The application of the format is enforced and checked when the a code is contributed, see <a href="../framework/contributing.html">Contributing</a> for more details. The configuration file for the formatting is provided in the <a href="https://github.com/idaholab/moose/blob/devel/.clang-format">.clang-format</a> file. If clang is installed, the following command will automatically format code changed between your current branch and the supplied <code>&lt;branch&gt;</code> (if omitted, defaults to HEAD):</p><pre style="max-height:350px;"><code class="language-text">
git clang-format [&lt;branch&gt;]
</code></pre><p>The automated testing that occurs on all Pull Requests will produce a &quot;diff&quot; of changes needed to conform with the standard.</p><p>General style guidelines include:</p><ul class="browser-default"><li><p> Single spacing around all binary operators </p></li><li><p> No spacing around unary operators </p></li><li><p> No spacing on the inside of brackets or parenthesis in expressions </p></li><li><p> Avoid braces for single statement control statements (i.e for, if, while, etc.) </p></li><li><p> C++ constructor spacing is demonstrated in the bottom of the example below</p></li></ul></section><section id="aea1dc04-b8cd-451c-811c-9a51a71b0256" data-section-level="2" data-section-text="Python File Formatting"><h2 id="python-file-formatting">Python File Formatting</h2><p><span class="tooltipped" data-tooltip="Multiphysics Object Oriented Simulation Environment" data-position="top" data-delay="50">MOOSE</span> uses <a href="https://black.readthedocs.io/en/stable/">Black</a> for formatting all Python code in the repository. The application of the format is enforced and checked when a code change is contributed; see <a href="../framework/contributing.html">Contributing</a> for more details. The configuration file for the formatting is provided in the <a href="https://github.com/idaholab/moose/blob/devel/pyproject.toml">pyproject.toml</a> file. If <code>black</code> is installed, the following command will automatically format all python code when ran from the root of the <span class="tooltipped" data-tooltip="Multiphysics Object Oriented Simulation Environment" data-position="top" data-delay="50">MOOSE</span> repository:</p><pre style="max-height:350px;"><code class="language-text">
black .
</code></pre></section><section id="71bcd552-a7d9-48af-b7ce-1db22ecfcccb" data-section-level="2" data-section-text="File Layout"><h2 id="file-layout">File Layout</h2><ul class="browser-default"><li><p>Header files should have a &quot;.h&quot; extension </p></li><li><p>Header files always go either into &quot;include&quot; or a sub-directory of &quot;include&quot; </p></li><li><p>C++ source files should have a &quot;.C&quot; extension </p></li><li><p>Source files go into &quot;src&quot; or a subdirectory of &quot;src&quot;.</p></li></ul></section><section id="02db35c4-0cb7-4c90-923b-486648eb1652" data-section-level="2" data-section-text="Files"><h2 id="files">Files</h2><p>Header and source file names must match the name of the class that the files define. Hence, each set of .h and .C files should contain code for a single class. Helper classes or classes not exposed to the user are an exception to this rule.</p><ul class="browser-default"><li><p>src/ClassName.C </p></li><li><p>include/ClassName.h</p></li></ul></section><section id="08da8f43-f5f1-46b0-89a5-4477643b207c" data-section-level="2" data-section-text="Naming"><h2 id="naming">Naming</h2><ul class="browser-default"><li><p><code>ClassName</code> Class names utilize camel case, note the .h and .C filenames must match the class name. </p></li><li><p><code>methodName()</code> Method and function names utilize camel case with the leading letter lower case. </p></li><li><p><code>_member_variable</code> Member variables begin with underscore and are all lower case and use underscore between words. </p></li><li><p><code>local_variable</code> Local variables are lowercase, begin with a letter, and use underscore between words</p></li></ul></section><section id="1431c8d1-9229-475e-9e04-44a7593b2d99" data-section-level="2" data-section-text="Use of C ++ keyword auto"><h2 id="use-of-c-keyword">Use of C++ <code>auto</code> keyword</h2><p>Use <code>auto</code> unless it complicates readability, but do not use it in a function or method declaration. Make sure your variables have <strong>good</strong> names when using auto!</p><pre style="max-height:350px;"><code class="language-cpp">
  auto dof = elem-&gt;dof_number(0, 0, 0);
  auto &amp; obj = getSomeObject();
  auto &amp; elem_it = mesh.active_local_elements_begin();
  auto &amp; item_pair = map.find(some_item);

  // Cannot use reference here
  for (auto it = obj.begin(); it != obj.end(); ++it)
    doSomething();

  // Use reference here
  for (auto &amp; obj : container)
    doSomething();
</code></pre></section><section id="e3bccbe4-49b9-4255-bdd6-e1c66b591401" data-section-level="2" data-section-text="Const - correctness"><h2 id="const-correctness">Const-correctness</h2><p>We expect contributions to follow strict const-correctness.</p><ul class="browser-default"><li><p>Use const to accurately express intent, invariants, and ownership. </p></li><li><p>Mark function parameters const whenever they are not modified. </p></li><li><p>Mark member functions const whenever they do not modify observable object state. </p></li><li><p>Prefer returning const references when mutation is not intended. </p></li><li><p>Avoid casting away const (e.g., <code>const_cast</code>) except in narrowly justified, well-documented cases.</p></li></ul><p>Const-correctness is not cosmetic. It:</p><ul class="browser-default"><li><p>Improves API clarity and self-documentation </p></li><li><p>Enables safer refactoring and compiler diagnostics </p></li><li><p>Allows the compiler to reason more effectively about aliasing and optimization </p></li><li><p>Prevents accidental state mutation, especially in generic and templated code</p></li></ul><p>Code that is logically const but not marked const will generally be treated as a design issue during review.</p></section><section id="fdb37f8b-0329-429b-b881-ce3e1b4c0b24" data-section-level="2" data-section-text="Index Variables in Looping Constructs"><h2 id="index-variables-in-looping-constructs">Index Variables in Looping Constructs</h2><p>In keeping with good <code>auto</code> practices, it would be really nice if we could use <code>auto</code> for loop indices in places where range loops aren&#x27;t convenient or possible. Unfortunately, the most natural code one would like to write yields a warning with our default compiler flags:</p><pre style="max-height:350px;"><code class="language-cpp">
  for (auto i = 0; i &lt; v.size(); ++i) // DON&#x27;T DO THIS!

  warning: comparison of integers of different signs: &#x27;int&#x27; and &#x27;std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt;::size_type&#x27; (aka &#x27;unsigned long&#x27;)
</code></pre><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">comment</i><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p>This warning stems from the fact that numeric literals in C++ are treated as &quot;signed ints&quot;. There are suffixes that can be applied to literals to force the &quot;correct&quot; type, but are you sure you really know the correct type? If you are thinking &quot;unsigned int&quot; you are in the majority and unfortunately also wrong. The right type for a container is <code>::size_type (aka &#x27;unsigned long&#x27;)</code>. See the error message once more above.</p></div></div></div><p>A few convenience methods are available to help generate integer ranges:</p><pre style="max-height:350px;"><code class="language-cpp">
#include &quot;libmesh/int_range.h&quot;

// Looping through n1, n1+1, n1+2, ..., n2-1
for (const auto i : make_range(n1, n2))
  // ... Do something with index i

// Looping through 0, 1, 2, ..., n-1
for (const auto i : make_range(n))
  // ... Do something with index i

// Looping through 0, 1, 2, ..., v.size()-1
for (const auto i : index_range(v))
  // ... Do something with index i
</code></pre></section><section id="c63240e3-3dde-4f7e-b3d3-086990657090" data-section-level="2" data-section-text="Structured binding"><h2 id="structured-binding">Structured binding</h2><p>Prefer structured binding when unpacking aggregate types and tuple-like objects.</p><p>An example for aggregate type structured binding:</p><pre style="max-height:350px;"><code class="language-cpp">
struct S
{
  int x;
  double y;
};

S s{1, 2.0};

// Bind by copying
auto [a, b] = s;

// Bind by reference
const auto &amp; [a_ref, b_ref] = s;
</code></pre><p>An example for tuple-like object binding,</p><pre style="max-height:350px;"><code class="language-cpp">
std::tuple&lt;int, Real, Point&gt; t = {1, 0.5, Point(0.1, 0.2, 0.3)};
const auto &amp; [a, b, c] = t;
</code></pre><p>Tuple-like object includes <code>std::pair</code>, <code>std::tuple</code>, <code>std::array</code> etc.</p><p>Using structured binding for unpacking sub-objects in a loop makes the intention very clear, i.e.,</p><pre style="max-height:350px;"><code class="language-cpp">
std::vector&lt;std::tuple&lt;dof_id_type, unsigned int, BoundaryID&gt;&gt; my_vec;
for (const auto &amp; [elem_id, side, bnd] : my_vec)
  // ...
</code></pre></section><section id="9b8cae6b-f580-4840-9b20-f640e4be5748" data-section-level="2" data-section-text="Aliasing"><h2 id="aliasing">Aliasing</h2><p>Consider using <code>using</code> (over <code>typedef</code>) to define type aliases to improve code readability:</p><pre style="max-height:350px;"><code class="language-cpp">
std::vector&lt;std::tuple&lt;dof_id_type, unsigned int, BoundaryID&gt;&gt; my_vec;

// Simplify code and clarify intention by defining an alias
using ElemSide = std::tuple&lt;dof_id_type, unsigned int, BoundaryID&gt;;
std::vector&lt;ElemSide&gt; my_vec2;
</code></pre><p>Remember that <code>using</code> also works with templates.</p></section><section id="c6d6847e-cd2f-4c52-af5e-8df047e2c4dc" data-section-level="2" data-section-text="Lambdas"><h2 id="lambdas">Lambdas</h2><p>List captured variables (by value or reference) in the capture list explicitly where possible.</p><pre style="max-height:350px;"><code class="language-cpp">
  std::for_each(container.begin(), container.end(), [=local_var](Foo &amp; foo) {
    foo.item = local_var;
  });
</code></pre></section><section id="2621010d-51ab-4350-a0e2-abab52ccecb8" data-section-level="2" data-section-text="Other C ++ Notes"><h2 id="other-c-notes">Other C++ Notes</h2><ul class="browser-default"><li><p>Use the <code>override</code> keyword on overridden <code>virtual</code> methods; do not mark the overriding method as <code>virtual</code> as it is redundant </p></li><li><p>Use <code>std::make_shared&lt;T&gt;()</code> when allocating new memory for shared pointers </p></li><li><p>Use <code>std::make_unique&lt;T&gt;()</code> when allocating new memory for unique pointers </p></li><li><p>Make use of std::move() for efficiency when possible</p></li></ul></section><section id="5e2fb59a-603d-4bc1-aef7-9d2c86f2ffe0" data-section-level="2" data-section-text="Variable Initialization"><h2 id="variable-initialization">Variable Initialization</h2><p>When creating a new variable use these patterns:</p><pre style="max-height:350px;"><code class="language-cpp">
unsigned int i = 4;  // Built-in types
SomeObject junk(17); // Objects
SomeObject * stuff = new SomeObject(18); // Pointers
</code></pre></section><section id="8961de46-ed29-44c0-bfd2-1f7e60877f10" data-section-level="2" data-section-text="Trailing Whitespace and Tabs"><h2 id="trailing-whitespace-and-tabs">Trailing Whitespace and Tabs</h2><p>Tabs and trailing whitespace are not allowed in the C++ in the repository. Running the following one-liner from the root directory of your repository will format the code correctly.</p><pre style="max-height:350px;"><code class="language-bash">
find . -name &#x27;*.[Chi]&#x27; -or -name &#x27;*.py&#x27; | xargs perl -pli -e &#x27;s/\s+$//&#x27;
</code></pre></section><section id="66e96c43-76ee-42ff-b966-2d036803c0f8" data-section-level="2" data-section-text="Prefer C ++ constructs over C constructs"><h2 id="prefer-c-constructs-over-c-constructs">Prefer C++ constructs over C constructs</h2><p>Use modern C++ language features and standard library facilities in preference to legacy C-style constructs. C++ provides stronger type safety, better abstraction, and clearer intent. New code should reflect these advantages.</p><p>Prefer:</p><ul class="browser-default"><li><p><code>nullptr</code> over <code>NULL</code> or <code>0</code> </p></li><li><p><code>static_cast</code>, <code>const_cast</code>, <code>reinterpret_cast</code> over C-style casts </p></li><li><p><code>constexpr</code> and <code>const</code> over preprocessor macros </p></li><li><p><code>enum class</code> over unscoped <code>enum</code> </p></li><li><p><code>std::array</code>, <code>std::vector</code>, <code>std::span</code> over raw arrays and pointer arithmetic </p></li><li><p>RAII types (e.g., <code>std::unique_ptr</code>, <code>std::lock_guard</code>) over manual resource management </p></li><li><p><code>&lt;algorithm&gt;</code> and <code>&lt;numeric&gt;</code> over hand-written loops where appropriate</p></li></ul></section><section id="2873a59c-0df1-470a-9739-5b0a8c6d2a59" data-section-level="2" data-section-text="C ++ Includes"><h2 id="c-includes">C++ Includes</h2><p>Only include things that are absolutely necessary in header files. Please use forward declarations when possible.</p><pre style="max-height:350px;"><code class="language-cpp">
// Forward declarations
class Something;
</code></pre><p>All non-system includes should use quotes with a single space between <code>include</code> and the filename.</p><pre style="max-height:350px;"><code class="language-cpp">
#include &quot;LocalInclude.h&quot;
#include &quot;libmesh/libmesh_include.h&quot;

#include &lt;system_library&gt;
</code></pre></section><section id="731433a6-7fe2-471c-8600-bc99bcbdc2e4" data-section-level="2" data-section-text="Free function vs . member function vs . static member function"><h2 id="free-function-vs-member-function-vs-static-member-function">Free function vs. member function vs. static member function</h2><p>When adding a new function, carefully decide whether it should be</p><ul class="browser-default"><li><p>a <em></em>non-static member function** (operates on an object), </p></li><li><p>a <em></em>static member function** (conceptually belongs to a type, but not to an instance), or </p></li><li><p>a <em></em>free function** (algorithm or operation external to any one type).</p></li></ul><section id="c6fd0f09-4c96-4125-8201-4eeafaa3fb17" data-section-level="3" data-section-text="Use a non - static member function ** when the operation :"><h3 id="use-a-non-static-member-function-when-the-operation">Use a <em></em>non-static member function** when the operation:</h3><ul class="browser-default"><li><p>Maintains or relies on class internal data that must be kept consistent</p><pre style="max-height:350px;"><code class="language-cpp">
class Matrix
{
public:
  void resize(int m, int n); // must keep internal consistency
};
</code></pre><p>If the function mutates internal state or requires intimate knowledge of representation, it should be a non-static member.</p><p></p></li><li><p>Is conceptually &quot;owned&quot; by a specific object</p><pre style="max-height:350px;"><code class="language-cpp">
particle.update(dt);
tensor.transpose();
</code></pre><p>Ask: &quot;Would users naturally expect to discover this via <code>obj.</code>?&quot; If yes, make it a non-static member.</p><p></p></li><li><p>Needs privileged access to object internals</p><p>If it would otherwise require friendship or breaking encapsulation, it usually belongs as a non-static member (or, rarely, a tightly controlled friend).</p></li></ul></section><section id="16f10496-8b62-4823-b737-167eba6b2285" data-section-level="3" data-section-text="Use a static member function ** when the operation :"><h3 id="use-a-static-member-function-when-the-operation">Use a <em></em>static member function** when the operation:</h3><ul class="browser-default"><li><p>Conceptually belongs to the type, but not to any one instance</p><pre style="max-height:350px;"><code class="language-cpp">
class Tensor
{
public:
  static Tensor identity(unsigned int dim);
  static Tensor fromEulerAngles(double a, double b, double c);
};
</code></pre><p>These are type-level operations: factories, validators, canonical constructors, or utilities closely tied to the abstraction.</p><p></p></li><li><p>Provides behavior naturally namespaced under the class</p><pre style="max-height:350px;"><code class="language-cpp">
Elem::build(type, dim);
FEProblemBase::validParams();
</code></pre><p>Static members improve discoverability, communicate conceptual ownership, and avoid polluting surrounding namespaces, even though no object data is used.</p><p></p></li><li><p>Logically groups algorithms that are tightly coupled to a type&#x27;s meaning</p><p>Especially in large frameworks like MOOSE, static members can act as a <em>semantic namespace</em> that documents intent better than a free function.</p><p>Think of static members as answering:</p><blockquote><p>&quot;Does this function describe the concept of this class, even though it doesn&#x27;t operate on an instance?&quot;</p></blockquote><p>If yes, a static member is often the right choice.</p></li></ul></section><section id="e9682d20-2467-4efa-b171-986b8e985c74" data-section-level="3" data-section-text="Use a free function ** when the operation is :"><h3 id="use-a-free-function-when-the-operation-is">Use a <em></em>free function** when the operation is:</h3><ul class="browser-default"><li><p>Symmetric</p><pre style="max-height:350px;"><code class="language-cpp">
dot(a, b);
distance(p, q);
misorientation(g1, g2);
</code></pre><p>If no operand is conceptually dominant, e.g. avoid <code>a.dot(b)</code>.</p><p></p></li><li><p>An algorithm over data</p><pre style="max-height:350px;"><code class="language-cpp">
norm(v);
det(A);
project(u, v);
</code></pre><p>If it takes objects as inputs and produces a value, prefer a free function (STL style).</p><p></p></li><li><p>Meant to be extensible across unrelated types</p><pre style="max-height:350px;"><code class="language-cpp">
template &lt;class T&gt;
auto norm(const T &amp; x);
</code></pre><p>Free functions enable generic programming, argument-dependent lookup (ADL) customization, and retroactive extension to foreign types.</p><p></p></li><li><p>Conceptually &quot;between&quot; types</p><pre style="max-height:350px;"><code class="language-cpp">
intersect(mesh, plane);
assemble(system, element);
</code></pre><p>These don&#x27;t belong to either type alone.</p></li></ul></section><section id="d0d432e4-6b0e-4676-93ff-e1286c655d53" data-section-level="3" data-section-text="Decision checklist"><h3 id="decision-checklist">Decision checklist</h3><ol class="browser-default" start="1"><li><p> Does the function need access to object&#x27;s internal data/state? Yes → non-static member </p></li><li><p> Does it conceptually belong to the type, but not an instance? Yes → static member </p></li><li><p> Is it symmetric, algorithmic, or cross-cutting? Yes → free function </p></li><li><p> Should users be able to extend it for new types via overloading/ADL? Yes → free function </p></li><li><p> Unsure? → default to free function (or static member if discoverability/namespacing is the primary concern)</p></li></ol></section><section id="de44fd47-bcc6-411b-9505-dd1391653366" data-section-level="3" data-section-text="Implementation note"><h3 id="implementation-note">Implementation note</h3><p>Helper free functions that are local to a translation unit (<code>.C</code> files) should be placed in an anonymous namespace (or marked <code>static</code>) to avoid external linkage.</p></section></section><section id="a0ea846b-4e54-4e5f-91db-61b485090955" data-section-level="2" data-section-text="Access control : public , protected , and private"><h2 id="access-control-public-protected-and-private">Access control: public, protected, and private</h2><p>Choose the narrowest access level that correctly expresses intent.</p><p>Public members and methods form the stable API of a class. They define what users are allowed to rely on. Use <code>public</code> only for:</p><ul class="browser-default"><li><p>Operations that are safe, well-defined, and intended for external use </p></li><li><p>Methods that preserve class invariants </p></li><li><p>Behavior you are willing to support long-term</p></li></ul><p>Public interfaces should be minimal, const-correct, and clearly documented. Adding something to <code>public</code> is a commitment.</p><p>Prefer <code>private</code> by default. Use <code>private</code> for:</p><ul class="browser-default"><li><p>Representation details and internal state </p></li><li><p>Helper functions and implementation mechanics </p></li><li><p>Anything that should not be relied upon by derived classes or external code</p></li></ul><p>Private members allow internal refactoring without breaking user assumptions and are the strongest tool for enforcing invariants.</p><p><code>protected</code> exists to support controlled customization via inheritance, not general access. Use <code>protected</code> only when:</p><ul class="browser-default"><li><p>A derived class must override or extend behavior </p></li><li><p>The base class explicitly documents a customization or extension point </p></li><li><p>The invariant contract between base and derived classes is clear</p></li></ul><p>Avoid exposing data members as <code>protected</code>. Prefer <code>protected</code> virtual functions or <code>protected</code> helper methods instead.</p><p>If a member is not intended to be used or overridden by derived classes, it should <em></em>not** be <code>protected</code>.</p><p>In summary:</p><ul class="browser-default"><li><p>Default to <code>private</code> </p></li><li><p>Promote to <code>public</code> only when there is a clear, justified use case </p></li><li><p>Treat <code>protected</code> members as implementation details meant only for subclasses, not as part of the class’s public interface </p></li><li><p>Consider composition as an alternative to inheritance, especially when behavior can be delegated rather than extended.</p></li></ul><p>Code reviews may request access-level reductions if members are more visible than necessary. In MOOSE, the preferred access order should be, whenever possible,</p><ul class="browser-default"><li><p>public </p></li><li><p>protected </p></li><li><p>private</p></li></ul><p>in the class definition. Following this convention helps expedite API review.</p></section><section id="b3029a94-35ec-4a96-8beb-7c885e3915f3" data-section-level="2" data-section-text="Generic programming and compile - time design"><h2 id="generic-programming-and-compile-time-design">Generic programming and compile-time design</h2><p>Prefer generic programming and compile-time constructs when they improve correctness, extensibility, or performance, or when they enable significantly cleaner and safer downstream code. Use templates to express behavior that is truly type-, dimension-, or policy-independent.</p><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">comment</i><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p>Generic code often forms infrastructure: it may be more complex than its uses, but should make user code simpler, safer, and more expressive.</p></div></div></div><p>Prefer</p><ul class="browser-default"><li><p><em></em>Function and class templates** for algorithms and abstractions that operate uniformly across types, dimensions, or policies </p></li><li><p><em></em>Compile-time constants and types** to express invariants, dimensions, and configuration that are fundamental to the model </p></li><li><p><em></em><code>auto</code> and template deduction** to reduce redundancy </p></li><li><p><em></em>Explicit documentation of template requirements**: Use <code>static_assert</code>, type traits, and clear comments to state what a template expects and guarantees. </p></li><li><p><em></em>Encapsulation of template complexity**: Isolate nontrivial metaprogramming behind small, stable interfaces.</p></li></ul><p>Be cautious about</p><ul class="browser-default"><li><p><em></em>Templates used only to avoid small amounts of duplication**, without a clear gain and with decreased readability </p></li><li><p><em></em>Encoding inherently runtime variability as template parameters** without a strong semantic or performance reason </p></li><li><p><em></em>Letting template machinery leak into user code**</p></li></ul><p>Not all valuable templates are simple. Foundational libraries (e.g. the STL, MetaPhysicL, expression-template frameworks) are often hard to read internally, yet dramatically improve downstream code. In that vein, do not reject generic designs solely because their implementation is nontrivial. Do require that unavoidable complexity be justified, contained, documented, and tested.</p><p>Prefer compile-time constants when values are known at compile time and semantically fixed.</p><p>Use:</p><ul class="browser-default"><li><p><code>constexpr</code> or <code>consteval</code> for values and functions known at compile time </p></li><li><p>Non-type template parameters (e.g., dimensions, tensor ranks, fixed sizes) when they affect layout, correctness, or optimization </p></li><li><p><code>std::integral_constant</code> or <code>constexpr</code> variables instead of macros</p></li></ul><p>Avoid:</p><ul class="browser-default"><li><p><code>#define</code> for constants or logic </p></li><li><p>Encoding configuration or runtime choices as compile-time constants without justification</p></li></ul><p>Compile-time constants should represent invariants, not tunable parameters.</p></section><section id="dbf5d579-9208-4d26-b63b-4db00f0d634d" data-section-level="2" data-section-text="Documentation"><h2 id="documentation">Documentation</h2><ul class="browser-default"><li><p>In source documentation should be extensive, designed toward the software developer, and be formatted for the use of <a href="https://www.doxygen.nl/index.html">Doxygen</a>.</p></li></ul></section><section id="c13ba583-b9dd-41a2-a506-369bb6f9cb12" data-section-level="2" data-section-text="Python"><h2 id="python">Python</h2><p>Where possible, follow the above rules for Python.  The only modifications are:</p><ol class="browser-default" start="1"><li><p>Four spaces are used for indenting and </p></li><li><p>Member variables should be named as follows:</p></li></ol><pre style="max-height:350px;"><code class="language-python">
class MyClass:
    def __init__(self):
        self.public_member
        self._protected_member
        self.__private_member
</code></pre></section><section id="98f25394-57de-4b45-b3d4-0296ecb0a756" data-section-level="2" data-section-text="Code Commandments"><h2 id="code-commandments">Code Commandments</h2><ul class="browser-default"><li><p>Use references instead of pointers whenever possible.   - i.e., this object lives for a shorter period of time than the object it needs to refer to does </p></li><li><p>Methods should return pointers to objects if returned objects are stored as pointers and references if returned objects are stored as references. </p></li><li><p>When creating a new class:   - Include dependent header files in the *.C file whenever possible (i.e. the header uses only references or pointers in it&#x27;s various declarations) and use forward declarations in the header file as needed.   - One exception is when doing so would require end users to include multiple files to complete definitions of child objects (Errors typically show up as &quot;incomplete class&quot; or something similar during compilation). </p></li><li><p>Avoid using a global variable when possible. </p></li><li><p>Every destructor must be virtual. </p></li><li><p>All function definitions should be in *.C files.   - The only exceptions are for inline functions for speed and templates. </p></li><li><p>Thou shalt not commit accidental insertion in a std::map by using brackets in a right-hand side operator unless proof is provided that it can&#x27;t fail.</p></li></ul></section></section></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>