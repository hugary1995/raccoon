<!DOCTYPE html><head><meta charset="UTF-8"><title>FDP | RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" alt="GitHub wordmark" class="github-mark"></img><img src="../../media/framework/github-mark.png" alt="GitHub logo" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="bbdcb9fd-7273-4972-9aa4-403e1219f0c6" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="c3aa6ff3-9796-41f4-9e5a-3cc408833e13" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="60421803-f87b-4b11-9109-cd2d1a220e69" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="162c8be5-f66a-4201-9b4f-5d5343a728f6" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="e3aa5be4-61fb-49ef-8265-a803c1c0f670"><i class="material-icons">menu</i></a><ul class="sidenav" id="e3aa5be4-61fb-49ef-8265-a803c1c0f670"><li><a href="#!" class="dropdown-trigger" data-target="48e8f310-f5ff-483e-b8e3-678750aa1694" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="b5eedfc7-9053-4d72-8354-f2f5c0266d14" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="9e225038-7cfd-447f-bd50-7729fd2cdacd" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="40c6cdbe-db4e-4676-8ab9-dfcb8e63ed4c" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="bbdcb9fd-7273-4972-9aa4-403e1219f0c6"><li><a href="../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../getting_started/running.html">Running your first model</a></li><li><a href="../../getting_started/paraview.html">Visualization</a></li><li><a href="../../getting_started/ide.html">Code development</a></li><li><a href="../../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="c3aa6ff3-9796-41f4-9e5a-3cc408833e13"><li><a href="../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="60421803-f87b-4b11-9109-cd2d1a220e69"><li><a href="../../theory/intro.html">Introduction</a></li><li><a href="../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../theory/minimization.html">The minimization problem</a></li><li><a href="../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="162c8be5-f66a-4201-9b4f-5d5343a728f6"><li><a href="../../modules/index.html">Physics modules</a></li><li><a href="../../syntax/index.html">Complete syntax</a></li><li><a href="../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="48e8f310-f5ff-483e-b8e3-678750aa1694"><li><a href="../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../getting_started/running.html">Running your first model</a></li><li><a href="../../getting_started/paraview.html">Visualization</a></li><li><a href="../../getting_started/ide.html">Code development</a></li><li><a href="../../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="b5eedfc7-9053-4d72-8354-f2f5c0266d14"><li><a href="../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="9e225038-7cfd-447f-bd50-7729fd2cdacd"><li><a href="../../theory/intro.html">Introduction</a></li><li><a href="../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../theory/minimization.html">The minimization problem</a></li><li><a href="../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="40c6cdbe-db4e-4676-8ab9-dfcb8e63ed4c"><li><a href="../../modules/index.html">Physics modules</a></li><li><a href="../../syntax/index.html">Complete syntax</a></li><li><a href="../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="dfc6d5dd-7a6b-4145-820e-d898e247779b" data-section-level="1" data-section-text="FDP"><h1 id="fdp">FDP</h1><p>Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.</p><section id="26eeb590-0070-48ec-a03d-f592c0c8e6e7" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>The Finite Difference Preconditioner (FDP) forms a &quot;Numerical Jacobian&quot; by doing direct finite differences of residual statements. This is extremely slow and inefficient, but is a great debugging tool because it allows you to form a nearly perfect preconditioner. FDP contains the same options for specifying off-diagonal blocks as <a href="SingleMatrixPreconditioner.html">SMP</a>. Since FDP builds the perfect approximate Jacobian it can be useful to use it directly to solve instead of using JFNK. The finite differencing is sensitive to the differencing parameter which can be specified using:</p><pre style="max-height:350px;"><code class="language-text">
petsc_options_iname = &#x27;-mat_fd_coloring_err -mat_fd_type&#x27;
petsc_options_value = &#x27;1e-6                 ds&#x27;
</code></pre></section><section id="af1a00cf-2bfc-49ab-b581-f8dd27bbefa7" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><pre style="max-height:350px;"><code class="language-moose">[Preconditioning&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Preconditioning/index.html&quot;}&gt;&gt;&gt;]
  active&lt;&lt;&lt;{&quot;description&quot;: &quot;If specified only the blocks named will be visited and made active&quot;}&gt;&gt;&gt; = &#x27;FDP_jfnk&#x27;

  [./FDP_jfnk]
    type = FDP&lt;&lt;&lt;{&quot;description&quot;: &quot;Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.&quot;, &quot;href&quot;: &quot;FiniteDifferencePreconditioner.html&quot;}&gt;&gt;&gt;

    off_diag_row&lt;&lt;&lt;{&quot;description&quot;: &quot;The variable names for the off-diagonal rows you want to add into the matrix; they will be associated with an off-diagonal column from the same position in off_diag_column.&quot;}&gt;&gt;&gt; = &#x27;forced&#x27;
    off_diag_column&lt;&lt;&lt;{&quot;description&quot;: &quot;The variable names for the off-diagonal columns you want to add into the matrix; they will be associated with an off-diagonal row from the same position in off_diag_row.&quot;}&gt;&gt;&gt; = &#x27;diffused&#x27;

    #Preconditioned JFNK (default)
    solve_type&lt;&lt;&lt;{&quot;description&quot;: &quot;PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem&quot;}&gt;&gt;&gt; = &#x27;PJFNK&#x27;

    petsc_options_iname&lt;&lt;&lt;{&quot;description&quot;: &quot;Names of PETSc name/value pairs&quot;}&gt;&gt;&gt; = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value&lt;&lt;&lt;{&quot;description&quot;: &quot;Values of PETSc name/value pairs (must correspond with \&quot;petsc_options_iname\&quot;&quot;}&gt;&gt;&gt; = &#x27;lu       1e-6                 ds&#x27;
  [../]

  [./FDP_n]
    type = FDP&lt;&lt;&lt;{&quot;description&quot;: &quot;Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.&quot;, &quot;href&quot;: &quot;FiniteDifferencePreconditioner.html&quot;}&gt;&gt;&gt;

    off_diag_row&lt;&lt;&lt;{&quot;description&quot;: &quot;The variable names for the off-diagonal rows you want to add into the matrix; they will be associated with an off-diagonal column from the same position in off_diag_column.&quot;}&gt;&gt;&gt; = &#x27;forced&#x27;
    off_diag_column&lt;&lt;&lt;{&quot;description&quot;: &quot;The variable names for the off-diagonal columns you want to add into the matrix; they will be associated with an off-diagonal row from the same position in off_diag_row.&quot;}&gt;&gt;&gt; = &#x27;diffused&#x27;

    solve_type&lt;&lt;&lt;{&quot;description&quot;: &quot;PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem&quot;}&gt;&gt;&gt; = &#x27;NEWTON&#x27;

    petsc_options_iname&lt;&lt;&lt;{&quot;description&quot;: &quot;Names of PETSc name/value pairs&quot;}&gt;&gt;&gt; = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value&lt;&lt;&lt;{&quot;description&quot;: &quot;Values of PETSc name/value pairs (must correspond with \&quot;petsc_options_iname\&quot;&quot;}&gt;&gt;&gt; = &#x27;lu       1e-6                 ds&#x27;
  [../]

  [./FDP_n_full]
    type = FDP&lt;&lt;&lt;{&quot;description&quot;: &quot;Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.&quot;, &quot;href&quot;: &quot;FiniteDifferencePreconditioner.html&quot;}&gt;&gt;&gt;

    full&lt;&lt;&lt;{&quot;description&quot;: &quot;Set to true if you want the full set of couplings between variables simply for convenience so you don&#x27;t have to set every off_diag_row and off_diag_column combination.&quot;}&gt;&gt;&gt; = true

    solve_type&lt;&lt;&lt;{&quot;description&quot;: &quot;PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem&quot;}&gt;&gt;&gt; = &#x27;NEWTON&#x27;

    petsc_options_iname&lt;&lt;&lt;{&quot;description&quot;: &quot;Names of PETSc name/value pairs&quot;}&gt;&gt;&gt; = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value&lt;&lt;&lt;{&quot;description&quot;: &quot;Values of PETSc name/value pairs (must correspond with \&quot;petsc_options_iname\&quot;&quot;}&gt;&gt;&gt; = &#x27;lu       1e-6                 ds&#x27;
  [../]
[]</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#b3829c6a-697a-4489-8820-3c4f787a477a">(moose/examples/ex11_prec/fdp.i)</a></section><section id="951d9744-e8b1-4c9b-a213-d153f9d7bf77" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="c0eaddd5-e5ab-4d2d-9611-e317b8066215" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">finite_difference_type</span><span class="moose-parameter-header-default">coloring</span><span class="moose-parameter-header-description">standard: standard finite differencecoloring: finite difference based on coloring</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>coloring</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>standard, coloring</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>standard: standard finite differencecoloring: finite difference based on coloring</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">full</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Set to true if you want the full set of couplings between variables simply for convenience so you don't have to set every off_diag_row and off_diag_column combination.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Set to true if you want the full set of couplings between variables simply for convenience so you don't have to set every off_diag_row and off_diag_column combination.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">implicit_geometric_coupling</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Set to true if you want to add entries into the matrix for degrees of freedom that might be coupled by inspection of the geometric search objects.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Set to true if you want to add entries into the matrix for degrees of freedom that might be coupled by inspection of the geometric search objects.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ksp_norm</span><span class="moose-parameter-header-default">unpreconditioned</span><span class="moose-parameter-header-description">Sets the norm that is used for convergence testing</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>unpreconditioned</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>none, preconditioned, unpreconditioned, natural, default</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Sets the norm that is used for convergence testing</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nl_sys</span><span class="moose-parameter-header-description">The nonlinear system whose linearization this preconditioner should be applied to.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>NonlinearSystemName</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The nonlinear system whose linearization this preconditioner should be applied to.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">off_diag_column</span><span class="moose-parameter-header-description">The variable names for the off-diagonal columns you want to add into the matrix; they will be associated with an off-diagonal row from the same position in off_diag_row.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;NonlinearVariableName&gt;</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The variable names for the off-diagonal columns you want to add into the matrix; they will be associated with an off-diagonal row from the same position in off_diag_row.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">off_diag_row</span><span class="moose-parameter-header-description">The variable names for the off-diagonal rows you want to add into the matrix; they will be associated with an off-diagonal column from the same position in off_diag_column.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;NonlinearVariableName&gt;</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The variable names for the off-diagonal rows you want to add into the matrix; they will be associated with an off-diagonal column from the same position in off_diag_column.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">pc_side</span><span class="moose-parameter-header-default">default</span><span class="moose-parameter-header-description">Preconditioning side</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>default</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>left, right, symmetric, default</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Preconditioning side</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="03ddfe44-f9a3-488b-b3f3-13c3d0021b90" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="eada9280-e741-4782-b344-13a5e9136d1a" data-section-level="3" data-section-text="Petsc Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">mffd_type</span><span class="moose-parameter-header-default">wp</span><span class="moose-parameter-header-description">Specifies the finite differencing type for Jacobian-free solve types. Note that the default is wp (for Walker and Pernice).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>wp</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>wp, ds</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Specifies the finite differencing type for Jacobian-free solve types. Note that the default is wp (for Walker and Pernice).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">petsc_options</span><span class="moose-parameter-header-description">Singleton PETSc options</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>-dm_moose_print_embedding, -dm_view, -KSP_CONVERGED_REASON, -KSP_GMRES_MODIFIEDGRAMSCHMIDT, -KSP_MONITOR, -KSP_MONITOR_SNES_LG, -SNES_KSP_EW, -SNES_CONVERGED_REASON, -SNES_KSP, -SNES_LINESEARCH_MONITOR, -SNES_MF, -SNES_MF_OPERATOR, -SNES_MONITOR, -SNES_TEST_DISPLAY, -SNES_VIEW, -SNES_MONITOR_CANCEL</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Singleton PETSc options</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">petsc_options_iname</span><span class="moose-parameter-header-description">Names of PETSc name/value pairs</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>-mat_fd_coloring_err, -mat_fd_type, -mat_mffd_type, -pc_asm_overlap, -pc_factor_levels, -pc_factor_mat_ordering_type, -pc_hypre_boomeramg_grid_sweeps_all, -pc_hypre_boomeramg_max_iter, -pc_hypre_boomeramg_strong_threshold, -pc_hypre_type, -pc_type, -sub_pc_type, -KSP_ATOL, -KSP_GMRES_RESTART, -KSP_MAX_IT, -KSP_PC_SIDE, -KSP_RTOL, -KSP_TYPE, -SUB_KSP_TYPE, -SNES_ATOL, -SNES_LINESEARCH_TYPE, -SNES_LS, -SNES_MAX_IT, -SNES_RTOL, -SNES_DIVERGENCE_TOLERANCE, -SNES_TYPE</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Names of PETSc name/value pairs</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">petsc_options_value</span><span class="moose-parameter-header-description">Values of PETSc name/value pairs (must correspond with "petsc_options_iname"</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Values of PETSc name/value pairs (must correspond with "petsc_options_iname"</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">solve_type</span><span class="moose-parameter-header-description">PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>PJFNK, JFNK, NEWTON, FD, LINEAR</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Petsc Parameters</h3></summary></details></section></section></section><div class="moose-modal modal" id="b3829c6a-697a-4489-8820-3c4f787a477a"><div class="modal-content"><h4>(moose/examples/ex11_prec/fdp.i)</h4><pre style="max-height:350px;"><code class="language-moose">[Mesh]
  file = square.e
[]

[Variables]
  [./diffused]
    order = FIRST
    family = LAGRANGE
  [../]

  [./forced]
    order = FIRST
    family = LAGRANGE
  [../]
[]

# The Preconditioning block
[Preconditioning]
  active = &#x27;FDP_jfnk&#x27;

  [./FDP_jfnk]
    type = FDP

    off_diag_row    = &#x27;forced&#x27;
    off_diag_column = &#x27;diffused&#x27;


  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;


    petsc_options_iname = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value = &#x27;lu       1e-6                 ds&#x27;
  [../]

  [./FDP_n]
    type = FDP

    off_diag_row    = &#x27;forced&#x27;
    off_diag_column = &#x27;diffused&#x27;


    solve_type = &#x27;NEWTON&#x27;

    petsc_options_iname = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value = &#x27;lu       1e-6                 ds&#x27;
  [../]

  [./FDP_n_full]
    type = FDP

    full = true


    solve_type = &#x27;NEWTON&#x27;

    petsc_options_iname = &#x27;-pc_type -mat_fd_coloring_err -mat_fd_type&#x27;
    petsc_options_value = &#x27;lu       1e-6                 ds&#x27;
  [../]
[]

[Kernels]
  [./diff_diffused]
    type = Diffusion
    variable = diffused
  [../]

  [./conv_forced]
    type = CoupledForce
    variable = forced
    v = diffused
  [../]

  [./diff_forced]
    type = Diffusion
    variable = forced
  [../]
[]

[BCs]
  #Note we have active on, and neglect the right_forced BC
  active = &#x27;left_diffused right_diffused left_forced&#x27;

  [./left_diffused]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;left&#x27;
    value = 0
  [../]

  [./right_diffused]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;right&#x27;
    value = 100
  [../]

  [./left_forced]
    type = DirichletBC
    variable = forced
    boundary = &#x27;left&#x27;
    value = 0
  [../]

  [./right_forced]
    type = DirichletBC
    variable = forced
    boundary = &#x27;right&#x27;
    value = 0
  [../]
[]

[Executioner]
  type = Steady



[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script><script type="text/javascript" src="../../js/moose_input_parser.js"></script>