<!DOCTYPE html><head><meta charset="UTF-8"><title>RayTracingViewFactor | RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" alt="GitHub wordmark" class="github-mark"></img><img src="../../media/framework/github-mark.png" alt="GitHub logo" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="a75894f0-37d9-42a2-87b1-dac55b856656" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="4592fb35-589f-40ff-a8c3-b2c0cda3f742" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="abcc4199-aec1-492d-a3c7-214f7b3b9d87" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="feb96d7a-7f6e-481d-b5cd-c4c6f11ad403" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="da0b0c0a-01cb-4feb-95aa-70944f6a5734"><i class="material-icons">menu</i></a><ul class="sidenav" id="da0b0c0a-01cb-4feb-95aa-70944f6a5734"><li><a href="#!" class="dropdown-trigger" data-target="31eddebd-6a56-408d-8c1b-fa19d846290c" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="89717555-47c2-490f-bc72-c0cabd58f359" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="2e3b0146-8ebe-4961-85de-15b16e20622c" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="eb195496-9eb6-4170-a3b9-ad96a6bbeac4" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="a75894f0-37d9-42a2-87b1-dac55b856656"><li><a href="../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../getting_started/running.html">Running your first model</a></li><li><a href="../../getting_started/paraview.html">Visualization</a></li><li><a href="../../getting_started/ide.html">Code development</a></li><li><a href="../../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="4592fb35-589f-40ff-a8c3-b2c0cda3f742"><li><a href="../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="abcc4199-aec1-492d-a3c7-214f7b3b9d87"><li><a href="../../theory/intro.html">Introduction</a></li><li><a href="../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../theory/minimization.html">The minimization problem</a></li><li><a href="../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="feb96d7a-7f6e-481d-b5cd-c4c6f11ad403"><li><a href="../../modules/index.html">Physics modules</a></li><li><a href="../../syntax/index.html">Complete syntax</a></li><li><a href="../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="31eddebd-6a56-408d-8c1b-fa19d846290c"><li><a href="../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../getting_started/running.html">Running your first model</a></li><li><a href="../../getting_started/paraview.html">Visualization</a></li><li><a href="../../getting_started/ide.html">Code development</a></li><li><a href="../../getting_started/docs.html">Browse the documentation locally</a></li></ul><ul class="dropdown-content" id="89717555-47c2-490f-bc72-c0cabd58f359"><li><a href="../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../tutorials/13_traction_separation.html">13. Traction separation law</a></li><li><a href="../../tutorials/14_klexpansion.html">14. Random field generation</a></li><li><a href="../../tutorials/15_mosaic_patches.html">15. Mosaic field generation</a></li></ul><ul class="dropdown-content" id="2e3b0146-8ebe-4961-85de-15b16e20622c"><li><a href="../../theory/intro.html">Introduction</a></li><li><a href="../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../theory/minimization.html">The minimization problem</a></li><li><a href="../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="eb195496-9eb6-4170-a3b9-ad96a6bbeac4"><li><a href="../../modules/index.html">Physics modules</a></li><li><a href="../../syntax/index.html">Complete syntax</a></li><li><a href="../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../syntax/solid_mechanics.html">Solid mechanics syntax</a></li><li><a href="../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../syntax/heat_transfer.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="gcse-search"></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="b5d8d311-4445-42fb-88a0-4c81d03668a4" data-section-level="1" data-section-text="RayTracingViewFactor"><h1 id="raytracingviewfactor">RayTracingViewFactor</h1><p>Computes view factors for arbitrary geometries using raytracing.</p><section id="9f0d0904-6ced-4271-a35c-fae0edca0f97" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p><code>RayTracingViewFactor</code> uses the ray tracing module to compute view factors for general cavities. <code>RayTracingViewFactor</code> does not require the faces of the cavity to be planar and it allows obstruction. Obstruction refers to the situation of boundary <code>a</code>&#x27;s line of sight to boundary <code>b</code> being obstructed by boundary <code>c</code>, where <code>a</code>, <code>b</code>, and <code>c</code> are boundaries participating in the radiative heat exchange. <code>RayTracingViewFactor</code> follows the general concept of radiative heat transfer geometries in MOOSE. A set of boundaries is in radiative heat transfer through a cavity filled with a transparent medium; the boundaries completely enclose the cavity so energy cannot leave the cavity by radiation.</p><p>For MOOSE&#x27;s raytracing to work, the cavity <strong>must</strong> be meshed. The view factors are computed by essentially computing the integrals in <a href="UnobstructedPlanarViewFactor.html">UnobstructedPlanarViewFactor</a>. The difference from <a href="UnobstructedPlanarViewFactor.html">UnobstructedPlanarViewFactor</a> is that the raytracer follows the ray drawn from starting to ending quadrature points and determines if the ray collides with any of the boundaries participating in the radiative heat transfer before it reaches the ending quadrature point. The view factor integrals are only incremented by the contribution associated with the starting/ending quadrature point if no collision with any boundary occurred.</p><p>The <code>RayTracingViewFactor</code> requires a <a href="ViewFactorRayStudy.html">ViewFactorRayStudy</a> for computing the view factors. The user should read the corresponding documentation.</p></section><section id="7697aac5-35d2-4ef2-9a74-bf158fce01ab" data-section-level="2" data-section-text="Important Convention on Boundaries and Normals"><h2 id="important-convention-on-boundaries-and-normals">Important Convention on Boundaries and Normals</h2><p>Boundaries (or synonymously sidesets) are a collection of element faces. An element face in MOOSE is identified by the element id and a <em>local</em> face id. As a consequence, a face belongs to a particular element because it&#x27;s simply one of the element&#x27;s faces. For element faces on the domain boundary it is clear which element they belong to because there is no other element across the face. However, for internal faces the question which of the two neighboring elements an element face belongs to is important. An example helps to clarify. Let&#x27;s assume that element <code>e1</code> and <code>e2</code> are neighbors and that they are adjacent across an element face that have the local indices <code>s1</code> and <code>s2</code> in elements <code>e1</code> and <code>e2</code>, respectively. Element face <code>(e1, s1)</code> belongs to element <code>e1</code>, while element face <code>(e2, s2)</code> belongs to element <code>e2</code>. This is important when applying boundary conditions on boundaries that are not domain boundaries. Let&#x27;s say element <code>e1</code> belongs to block <code>b1</code> and element <code>e2</code> belongs to block <code>b2</code> and we want to apply boundary conditions for the heat equation solved on block <code>b1</code>. In this case, the boundary that we apply boundary conditions for the heat equation must be composed of element faces belonging to <code>b1</code>. Going back to our two neighboring example elements, the face <code>(e1,s1)</code> must be added to the boundary because it belongs to element <code>e1</code> which belongs to block <code>b1</code> which defines the temperature. If the user tries to impose the boundary condition on element face <code>(e2,s1)</code> MOOSE will segfault. This distinction between internal and external boundaries is important to understand how to define boundaries around radiation cavities.  </p><p>Boundaries enclosing a cavity are either external or internal boundaries. External boundaries do not have a neighbor on the other side of the face, while internal boundaries have valid elements on both sides of it. For external boundaries, the sideset must belong to one of the cavity blocks simply because there are no elements on the other side of the sideset.</p><p>However, for internal sidesets the cavity boundary <strong>must</strong> belong to the element right outside of the cavity. If element face <code>(e1, s1)</code> is just outside of the cavity and <code>(e2, s2)</code> is immediately on the other side inside of the cavity, then <code>(e1, s1)</code> should be used to construct the sideset. The reason is that internal sidesets will usually solve coupled heat conduction problems on the block just outside the cavity and boundary conditions for the temperature defined on this block must be imposed on the heat conduction/cavity interface.</p><p>The <a href="../meshgenerators/SideSetsBetweenSubdomainsGenerator.html">SideSetsBetweenSubdomainsGenerator</a> mesh generator can be used for setting up cavity boundaries. In this mesh generator, the sidesets will belong to the &quot;primary&quot; side. Returning to the example, if <a href="#c9ac28fe-a0d7-44fa-9e1d-2b7f1160eede" class="moose-modal-link modal-trigger">&quot;primary_block&quot;</a> is <code>b1</code> and <a href="#da2e038e-481f-4e81-9c1f-add5b1b37ef2" class="moose-modal-link modal-trigger">&quot;paired_block&quot;</a> is <code>b2</code>, then <code>(e1,s1)</code> will be the element faces used in the new sideset. Specifically, the <a href="#87b41c95-f20c-477e-9c9f-9d5a2c367f4b" class="moose-modal-link modal-trigger">&quot;primary_block&quot;</a> are the blocks around the cavity, while <a href="#e558176e-0b18-4c28-9469-94c16cfd75ea" class="moose-modal-link modal-trigger">&quot;paired_block&quot;</a> are the blocks inside the cavity.</p></section><section id="b9f71503-bf48-4296-9ee1-f8bc38287c33" data-section-level="2" data-section-text="Example Input syntax"><h2 id="example-input-syntax">Example Input syntax</h2><pre style="max-height:350px;"><code class="language-moose">[Mesh&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Mesh/index.html&quot;}&gt;&gt;&gt;]
   [cartesian]
     type = CartesianMeshGenerator&lt;&lt;&lt;{&quot;description&quot;: &quot;This CartesianMeshGenerator creates a non-uniform Cartesian mesh.&quot;, &quot;href&quot;: &quot;../meshgenerators/CartesianMeshGenerator.html&quot;}&gt;&gt;&gt;
     dim&lt;&lt;&lt;{&quot;description&quot;: &quot;The dimension of the mesh to be generated&quot;}&gt;&gt;&gt; = 3
     dx&lt;&lt;&lt;{&quot;description&quot;: &quot;Intervals in the X direction&quot;}&gt;&gt;&gt; = &#x27;0.55 0.9 0.55&#x27;
     dy&lt;&lt;&lt;{&quot;description&quot;: &quot;Intervals in the Y direction (required when dim&gt;1 otherwise ignored)&quot;}&gt;&gt;&gt; = &#x27;0.55 0.9 0.55&#x27;
     dz&lt;&lt;&lt;{&quot;description&quot;: &quot;Intervals in the Z direction (required when dim&gt;2 otherwise ignored)&quot;}&gt;&gt;&gt; = &#x27;0.75 0.0001 0.25&#x27;
     subdomain_id&lt;&lt;&lt;{&quot;description&quot;: &quot;Block IDs (default to all zero)&quot;}&gt;&gt;&gt; = &#x27;0 0 0
                     0 0 0
                     0 0 0
                     0 0 0
                     0 1 0
                     0 0 0
                     0 0 0
                     0 0 0
                     0 0 0&#x27;
   []

   [side_set_around_obstruction]
     type = SideSetsBetweenSubdomainsGenerator&lt;&lt;&lt;{&quot;description&quot;: &quot;MeshGenerator that creates a sideset composed of the nodes located between two or more subdomains.&quot;, &quot;href&quot;: &quot;../meshgenerators/SideSetsBetweenSubdomainsGenerator.html&quot;}&gt;&gt;&gt;
     input&lt;&lt;&lt;{&quot;description&quot;: &quot;The mesh we want to modify&quot;}&gt;&gt;&gt; = cartesian
     primary_block&lt;&lt;&lt;{&quot;description&quot;: &quot;The primary set of blocks for which to draw a sideset between&quot;}&gt;&gt;&gt; = 1
     paired_block&lt;&lt;&lt;{&quot;description&quot;: &quot;The paired set of blocks for which to draw a sideset between&quot;}&gt;&gt;&gt; = 0
     new_boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of boundary names to create on the supplied subdomain&quot;}&gt;&gt;&gt; = &#x27;obstacle&#x27;
   []
[]

[UserObjects&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/UserObjects/index.html&quot;}&gt;&gt;&gt;]
  [view_factor_study]
    type = ViewFactorRayStudy&lt;&lt;&lt;{&quot;description&quot;: &quot;This ray study is used to compute view factors in cavities with obstruction. It sends out rays from surfaces bounding the radiation cavity into a set of directions determined by an angular quadrature. The rays are tracked and view factors are computed by determining the surface where the ray dies.&quot;, &quot;href&quot;: &quot;ViewFactorRayStudy.html&quot;}&gt;&gt;&gt;
    execute_on&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of flag(s) indicating when this object should be executed. For a description of each flag, see https://mooseframework.inl.gov/source/interfaces/SetupInterface.html.&quot;}&gt;&gt;&gt; = initial
    boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of boundaries where view factors are desired&quot;}&gt;&gt;&gt; = &#x27;left right top bottom front back obstacle&#x27;
    face_order&lt;&lt;&lt;{&quot;description&quot;: &quot;The face quadrature rule order&quot;}&gt;&gt;&gt; = FOURTH
    polar_quad_order&lt;&lt;&lt;{&quot;description&quot;: &quot;Order of the polar quadrature [polar angle is between ray and normal]. Must be even.&quot;}&gt;&gt;&gt; = 12
    azimuthal_quad_order&lt;&lt;&lt;{&quot;description&quot;: &quot;Order of the azimuthal quadrature per quadrant [azimuthal angle is measured in a plane perpendicular to the normal].&quot;}&gt;&gt;&gt; = 4
    warn_subdomain_hmax&lt;&lt;&lt;{&quot;description&quot;: &quot;Whether or not to warn if the approximated hmax (constant on subdomain) varies significantly for an element&quot;}&gt;&gt;&gt; = false
  []

  [view_factor]
    type = RayTracingViewFactor&lt;&lt;&lt;{&quot;description&quot;: &quot;Computes view factors for arbitrary geometries using raytracing.&quot;, &quot;href&quot;: &quot;RayTracingViewFactor.html&quot;}&gt;&gt;&gt;
    boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of boundary IDs from the mesh where this object applies&quot;}&gt;&gt;&gt; = &#x27;left right top bottom front back obstacle&#x27;
    execute_on&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of flag(s) indicating when this object should be executed. For a description of each flag, see https://mooseframework.inl.gov/source/interfaces/SetupInterface.html.&quot;}&gt;&gt;&gt; = INITIAL
    ray_study_name&lt;&lt;&lt;{&quot;description&quot;: &quot;Name of the view factor ray study UO.&quot;}&gt;&gt;&gt; = view_factor_study
  []
[]

[RayBCs&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/RayBCs/index.html&quot;}&gt;&gt;&gt;/viewfactor]
  type = ViewFactorRayBC&lt;&lt;&lt;{&quot;description&quot;: &quot;This ray boundary condition is applied on all sidesets bounding a radiation cavity except symmetry sidesets. It kills rays that hit the sideset and scores the ray for computation of view factors.&quot;, &quot;href&quot;: &quot;../raybcs/ViewFactorRayBC.html&quot;}&gt;&gt;&gt;
  boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The list of boundary IDs from the mesh where this object applies&quot;}&gt;&gt;&gt; = &#x27;left right top bottom front back obstacle&#x27;
[]

# Reference solution for front -&gt; back view factor
# is 0.282833. This result is derived from analytical
# view factors from:
# front -&gt; orthogonal sides around front [left right top bottom]
# front -&gt; obstacle
# front -&gt; everywhere must be sum to 1
#
[Postprocessors&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Postprocessors/index.html&quot;}&gt;&gt;&gt;]
  [front_back]
    type = ViewFactorPP&lt;&lt;&lt;{&quot;description&quot;: &quot;This postprocessor allows to extract view factors from ViewFactor userobjects.&quot;, &quot;href&quot;: &quot;../postprocessors/ViewFactorPP.html&quot;}&gt;&gt;&gt;
    from_boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The boundary from which to compute the view factor.&quot;}&gt;&gt;&gt; = front
    to_boundary&lt;&lt;&lt;{&quot;description&quot;: &quot;The boundary from which to compute the view factor.&quot;}&gt;&gt;&gt; = back
    view_factor_object_name&lt;&lt;&lt;{&quot;description&quot;: &quot;Name of the ViewFactor userobjects.&quot;}&gt;&gt;&gt; = view_factor
  []
[]

[Problem&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Problem/index.html&quot;}&gt;&gt;&gt;]
  solve = false
[]

[Executioner&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Executioner/index.html&quot;}&gt;&gt;&gt;]
  type = Steady
[]

[Outputs&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Outputs/index.html&quot;}&gt;&gt;&gt;]
  csv&lt;&lt;&lt;{&quot;description&quot;: &quot;Output the scalar variable and postprocessors to a *.csv file using the default CSV output.&quot;}&gt;&gt;&gt; = true
[]</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#502101ad-ef88-4623-bcaf-0e10a1b90b81">(moose/modules/heat_transfer/test/tests/view_factors/view_factor_obstructed.i)</a></section><section id="e8e44310-ca88-4f6f-9946-0bbc0ccb84c3" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="d40f16d2-d03b-47b7-be30-ee6d0267c313" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this object applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;BoundaryName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this object applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ray_study_name</span><span class="moose-parameter-header-description">Name of the view factor ray study UO.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>UserObjectName</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Name of the view factor ray study UO.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="474a7228-159a-47e3-b79c-c057f8cae271" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">normalize_view_factor</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines if view factors are normalized to sum to one (consistent with their definition).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Determines if view factors are normalized to sum to one (consistent with their definition).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">print_view_factor_info</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flag to print information about computed view factors.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flag to print information about computed view factors.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">view_factor_tol</span><span class="moose-parameter-header-default">1.79769e+308</span><span class="moose-parameter-header-description">Tolerance for checking view factors. Default is to allow everything.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1.79769e+308</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Tolerance for checking view factors. Default is to allow everything.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="fcaadab1-83dd-42fe-a422-1e3dc768390b" data-section-level="3" data-section-text="Execution Scheduling Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">allow_duplicate_execution_on_initial</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed. For a description of each flag, see https://mooseframework.inl.gov/source/interfaces/SetupInterface.html.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>XFEM_MARK, NONE, INITIAL, LINEAR, LINEAR_CONVERGENCE, NONLINEAR, NONLINEAR_CONVERGENCE, POSTCHECK, TIMESTEP_END, TIMESTEP_BEGIN, MULTIAPP_FIXED_POINT_END, MULTIAPP_FIXED_POINT_BEGIN, MULTIAPP_FIXED_POINT_CONVERGENCE, FINAL, CUSTOM, TRANSFER</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed. For a description of each flag, see https://mooseframework.inl.gov/source/interfaces/SetupInterface.html.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execution_order_group</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Execution order groups are executed in increasing order (e.g., the lowest number is executed first). Note that negative group numbers may be used to execute groups before the default (0) group. Please refer to the user object documentation for ordering of user object execution within a group.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>int</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Execution order groups are executed in increasing order (e.g., the lowest number is executed first). Note that negative group numbers may be used to execute groups before the default (0) group. Please refer to the user object documentation for ordering of user object execution within a group.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_postaux</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in POSTAUX</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in POSTAUX</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_preaux</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in PREAUX</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in PREAUX</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_preic</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in PREIC during initial setup</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in PREIC during initial setup</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Execution Scheduling Parameters</h3></summary></details></section><section id="db3e2664-c3ef-427d-9810-d337ace3e6c6" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>Yes</p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="f4757694-a8c0-4413-91ac-b52ddc07892a" data-section-level="3" data-section-text="Material Property Retrieval Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">prop_getter_suffix</span><span class="moose-parameter-header-description">An optional suffix parameter that can be appended to any attempt to retrieve/get material properties. The suffix will be prepended with a '_' character.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MaterialPropertyName</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>An optional suffix parameter that can be appended to any attempt to retrieve/get material properties. The suffix will be prepended with a '_' character.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_interpolated_state</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">For the old and older state use projected material properties interpolated at the quadrature points. To set up projection use the ProjectedStatefulMaterialStorageAction.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>For the old and older state use projected material properties interpolated at the quadrature points. To set up projection use the ProjectedStatefulMaterialStorageAction.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Material Property Retrieval Parameters</h3></summary></details></section></section></section><div class="moose-modal modal" id="c9ac28fe-a0d7-44fa-9e1d-2b7f1160eede"><div class="modal-content"><h4>primary_block</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The primary set of blocks for which to draw a sideset between</p></div></div><div class="moose-modal modal" id="da2e038e-481f-4e81-9c1f-add5b1b37ef2"><div class="modal-content"><h4>paired_block</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The paired set of blocks for which to draw a sideset between</p></div></div><div class="moose-modal modal" id="87b41c95-f20c-477e-9c9f-9d5a2c367f4b"><div class="modal-content"><h4>primary_block</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The primary set of blocks for which to draw a sideset between</p></div></div><div class="moose-modal modal" id="e558176e-0b18-4c28-9469-94c16cfd75ea"><div class="modal-content"><h4>paired_block</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The paired set of blocks for which to draw a sideset between</p></div></div><div class="moose-modal modal" id="502101ad-ef88-4623-bcaf-0e10a1b90b81"><div class="modal-content"><h4>(moose/modules/heat_transfer/test/tests/view_factors/view_factor_obstructed.i)</h4><pre style="max-height:350px;"><code class="language-moose">[Mesh]
   [cartesian]
     type = CartesianMeshGenerator
     dim = 3
     dx = &#x27;0.55 0.9 0.55&#x27;
     dy = &#x27;0.55 0.9 0.55&#x27;
     dz = &#x27;0.75 0.0001 0.25&#x27;
     subdomain_id = &#x27;0 0 0
                     0 0 0
                     0 0 0
                     0 0 0
                     0 1 0
                     0 0 0
                     0 0 0
                     0 0 0
                     0 0 0&#x27;
   []

   [side_set_around_obstruction]
     type = SideSetsBetweenSubdomainsGenerator
     input = cartesian
     primary_block = 1
     paired_block = 0
     new_boundary = &#x27;obstacle&#x27;
   []
[]

[UserObjects]
  [view_factor_study]
    type = ViewFactorRayStudy
    execute_on = initial
    boundary = &#x27;left right top bottom front back obstacle&#x27;
    face_order = FOURTH
    polar_quad_order = 12
    azimuthal_quad_order = 4
    warn_subdomain_hmax = false
  []

  [view_factor]
    type = RayTracingViewFactor
    boundary = &#x27;left right top bottom front back obstacle&#x27;
    execute_on = INITIAL
    ray_study_name = view_factor_study
  []
[]

[RayBCs/viewfactor]
  type = ViewFactorRayBC
  boundary = &#x27;left right top bottom front back obstacle&#x27;
[]

# Reference solution for front -&gt; back view factor
# is 0.282833. This result is derived from analytical
# view factors from:
# front -&gt; orthogonal sides around front [left right top bottom]
# front -&gt; obstacle
# front -&gt; everywhere must be sum to 1
#
[Postprocessors]
  [front_back]
    type = ViewFactorPP
    from_boundary = front
    to_boundary = back
    view_factor_object_name = view_factor
  []
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Steady
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="https://cse.google.com/cse.js?cx=008852834041008754713:g3ilnhhbbj9"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script><script type="text/javascript" src="../../js/moose_input_parser.js"></script>