<!DOCTYPE html><head><meta charset="UTF-8"><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script><title>RelationshipManager|RACCOON</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li class="moose-mega-menu-trigger" data-target="de192f7b-7208-4bc7-9574-9884388fe74f"><a>Benchmarks<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li></ul><a href="#" class="sidenav-trigger" data-target="14eb5866-e893-48c7-9ff1-4a8d2027b6d4"><i class="material-icons">menu</i></a><ul class="sidenav" id="14eb5866-e893-48c7-9ff1-4a8d2027b6d4"><li><a href="../../install/index.html">Install</a></li><li><a href="../../benchmarks.menu.html">Benchmarks</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="moose-mega-menu-content" id="de192f7b-7208-4bc7-9574-9884388fe74f"><div class="moose-mega-menu-wrapper"><div class="row row"><div class="col s12 m6 l4"><h2 id="mode-i-crack-propagation"><a href="../../benchmarks/mode1.html">Mode I crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/mode1.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="mode-ii-crack-propagation"><a href="../../benchmarks/mode2.html">Mode II crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/mode2.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="soil-desiccation"><a href="../../benchmarks/mud.html">Soil desiccation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/soil.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div></div></div></div><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">relationshipmanagers</span><a href="#" class="breadcrumb">RelationshipManager</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="f967a490-d02a-4c89-bf7f-b11cb3735688" data-section-level="1" data-section-text="RelationshipManager"><h1 id="relationshipmanager">RelationshipManager</h1><p>The RelationshipManager system is for making MOOSE aware of extra geometric, algebraic, or coupling information needed to perform a calculation. This is an extension of the &quot;stencil&quot; concept when working with a structured mesh and performing calculations where you need neighboring information. Relationship managers (RMs) come in three flavors: geometric, algebraic, and coupling.  For discerning between the three types, we can think of three levels of &quot;element dependencies&quot;. An element K1 has a coupling dependency on element K2 if the dofs on K1 might need sparsity pattern entries for dofs on K2.  An element K1 has an algebraic dependency on K2 if a processor which owns K1 might need to examine the solution dof values on K2.  An element K1 has a geometric dependency on K2 if a processor which owns K1 might need to examine the geometry of K2. For any element K, we could call the set of coupling-ghosted (&quot;coupled&quot;) elements C(K), call the set of algebraic-ghosted (&quot;evaluable&quot;) elements E(K), and call the set of geometry-ghosted (&quot;ghosted&quot;) elements G(K). It should be safe to assume that, for any element K, C(K) implies E(K) implies G(K), meaning that a requirement for coupling ghosting means that algebraic and geometric ghosting will be required as well. As a more concrete example, it will be impossible to investigate the degrees of freedom on an element in the <code>libMesh::DofMap</code> if that element has been deleted from the current process, e.g. if we forgot to geometrically ghost the element. Hence geometrically ghosted elements must be a super-set of algebraically ghosted elements which must be a super-set of coupling-ghosted elements.</p><p>The RM system is fully pluggable like other MOOSE systems but it not intended to be exposed in the input file in any way. Instead, individual objects that require extra information should &quot;register&quot; an appropriate RM right in its <code>validParams</code> function and have MOOSE add the appropriate object to the simulation at the proper time. It is possible for a single RM to define geometric, algebraic, and coupling-ghosting, e.g like the RM defined for <code>DGKernelBase</code> derived-objects:</p><pre class="moose-pre"><code class="language-c++">
params.addRelationshipManager(&quot;ElementSideNeighborLayers&quot;,
                              Moose::RelationshipManagerType::GEOMETRIC |
                                  Moose::RelationshipManagerType::ALGEBRAIC |
                                  Moose::RelationshipManagerType::COUPLING);
</code></pre><p>An application developer should always respect the superset relationships discussed in the introductory paragraph, e.g. the following relationship manager additions would provide a valid ghosting set-up:</p><pre class="moose-pre"><code class="language-c++">
params.addRelationshipManager(
    &quot;ElementSideNeighborLayers&quot;,
    Moose::RelationshipManagerType::GEOMETRIC,
    [](const InputParameters &amp;, InputParameters &amp; rm_params) {
      rm_params.set&lt;unsigned short&gt;(&quot;layers&quot;) = 3;
    }
);
params.addRelationshipManager(
    &quot;ElementSideNeighborLayers&quot;,
    Moose::RelationshipManagerType::ALGEBRAIC,
    [](const InputParameters &amp;, InputParameters &amp; rm_params) {
      rm_params.set&lt;unsigned short&gt;(&quot;layers&quot;) = 2;
    }
);
params.addRelationshipManager(
    &quot;ElementSideNeighborLayers&quot;,
    Moose::RelationshipManagerType::COUPLING,
    [](const InputParameters &amp;, InputParameters &amp; rm_params) {
      rm_params.set&lt;unsigned short&gt;(&quot;layers&quot;) = 1;
    }
);
</code></pre><p>because any coupling-ghosted element is guaranteed to be algebraically ghosted, and each algebraically ghosted element is guaranteed to be geometrically ghosted (1 layer coupling ghosting &lt;= 2 layers algebraic ghosting &lt;= 3 layers geometric ghosting). The following set-up is also valid:</p><pre class="moose-pre"><code class="language-c++">
params.addRelationshipManager(&quot;ElementSideNeighborLayers&quot;,
                              Moose::RelationshipManagerType::GEOMETRIC |
                                  Moose::RelationshipManagerType::ALGEBRAIC |
                                  Moose::RelationshipManagerType::COUPLING);
</code></pre><p>because there is a (default) 1 layer of side ghosting for all ghosting types (1 layer coupling ghosting &lt;= 1 layer algebraic ghosting &lt;= 1 layer geometric ghosting). The following RM set-up would be <em></em>invalid**:</p><pre class="moose-pre"><code class="language-c++">
params.addRelationshipManager(
    &quot;ElementSideNeighborLayers&quot;,
    Moose::RelationshipManagerType::GEOMETRIC,
    [](const InputParameters &amp;, InputParameters &amp; rm_params) {
      rm_params.set&lt;unsigned short&gt;(&quot;layers&quot;) = 1;
    }
);
params.addRelationshipManager(
    &quot;ElementSideNeighborLayers&quot;,
    Moose::RelationshipManagerType::ALGEBRAIC,
    [](const InputParameters &amp;, InputParameters &amp; rm_params) {
      rm_params.set&lt;unsigned short&gt;(&quot;layers&quot;) = 2;
    }
);
</code></pre><p>because there is less geometric ghosting than algebraic. In this scenario we would likely attempt to access degrees of freedom in the solution vector corresponding to elements that had been deleted (in a <code>DistributedMesh</code> context), and our simulation would fail. </p></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script>